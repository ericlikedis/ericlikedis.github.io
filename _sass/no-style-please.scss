@import 'colors';

// bg color is also needed in html in order to
// block body's background propagation
// see: https://stackoverflow.com/a/61265706
html, body { background: $outer-bg-color; }

html { height: 100%; }

body {
  color: $fg-color;
  font-family: monospace;
  font-size: 16px;
  line-height: 1.4;
  margin: 0;
  min-height: 100%;
  overflow-wrap: break-word;
}

.post-meta { text-align: right; }

.site-title { 
  font-size: 36pt;
  letter-spacing: 2pt;
}

.post-content {
  font-family: sans-serif;
  font-size: 16px;
  line-height: 150%;
}

.post-content h2, .post-content h3, .post-content h4,
.post-content h5, .post-content h6, .post-content a {
  font-family: monospace;
}

h2, h3, h4, h5, h6 { margin-top: 3rem; }

hr { margin: 2rem 0; }

p { margin: 1rem 0; }

li { margin: 0.4rem 0; }

*:target { background: yellow; }

.w {
  max-width: 700px;
  margin: 2em auto;
  padding: 1em 2rem;
  background-color: $bg-color;
  box-shadow: 3pt;
}

hr {
  text-align: center;
  border: 0;

  &:before { content: '/////' }
  &:after { content: attr(data-content) '/////' }
}

table { width: 100%; }

table, th, td {
  border: thin solid black;
  border-collapse: collapse;
  padding: 0.4rem;
}

code {
  color: white;
  background: black;
}

div.highlighter-rouge code {
  display: block;
  overflow-x: auto;
  white-space: pre-wrap;
  padding: 1rem;
}

blockquote {
  font-style: italic;
  border: thin solid black;
  padding: 1rem;

  p { margin: 0; }
}

img {
  max-width: 100%;
  display: block;
  margin: 0 auto;
}

a {
  color: $link-color;
}

/* Fixed container at bottom */
.terminal-container {
  position: fixed;
  bottom: 2rem;
  left: 50%;
  transform: translateX(-50%);
  text-align: left;
  font: 600 18px/1.4 ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
  color: #9cff8a;
  background: rgba(10,10,10,0.85);
  padding: 1rem 1.5rem;
  border-radius: 12px;
  box-shadow: 0 0 24px rgba(0,255,140,0.08) inset, 0 12px 30px rgba(0,0,0,0.35);
  width: fit-content;
  z-index: 1000;
}

/* Lines stack like a terminal feed */
.terminal-line { display: block; white-space: nowrap; }

/* Prompt + typewriter */
.prompt { margin-right: .5ch; opacity: .8; }

.typewriter {
  display:inline-block;
  overflow:hidden;
  border-right:.12em currentColor;
  width:0ch;

  /* per-char timing + per-line delay */
  --t: 90ms; /* ms per character (tweakable) */
  animation:
    typing calc(var(--n) * var(--t)) steps(var(--n)) forwards,
    caret-blink .85s step-end infinite;
  animation-delay: var(--delay, 0ms), var(--delay, 0ms);
}
@keyframes typing { to { width: calc(var(--n) * 1ch); } }
@keyframes caret-blink { 50% { border-right-color: transparent; } }

/* Accessibility */
@media (prefers-reduced-motion: reduce) {
  .typewriter { animation: none; border-right: 0; width: auto; }
}
/* Fade out the terminal container after all typing completes */
@keyframes terminal-fade {
  to { opacity: 0; transform: translate(-50%, 20px); }
}

.terminal-container {
  animation: terminal-fade 0.8s ease-out forwards; /* faster fade */
  animation-delay: var(--terminal-total, 8s);     /* waits for typing to finish */
}

/* === End Glitchy Terminal Typewriter === */
